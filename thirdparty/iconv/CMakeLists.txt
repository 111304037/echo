message(STATUS "Configuring module: iconv...")

SET(INCLUDE_FILES
    libiconv-1.14/include
    libiconv-1.14/libcharset
    libiconv-1.14/lib
    libiconv-1.14/libcharset/include
	libiconv-1.14/srclib
)

INCLUDE_DIRECTORIES( ${INCLUDE_FILES})

ADD_DEFINITIONS(-DLIBDIR="c" -DBUILDING_LIBICONV -DIN_LIBRARY)


SET(SOURCE_FILES
	libiconv-1.14/libcharset/lib/localcharset.c
	libiconv-1.14/lib/iconv.c
	libiconv-1.14/lib/relocatable.c
)

ADD_LIBRARY(iconv STATIC ${SOURCE_FILES})

IF(LORD_BUILD_PLATFORM_ANDROID)
	#android_ndk_gdb_debuggable(iconv) 
	SET_TARGET_PROPERTIES(${MODULE_NAME} PROPERTIES VC_MDD_ANDROID_PLATFORM_TOOLSET "Clang_3_6")
	SET_TARGET_PROPERTIES(${MODULE_NAME} PROPERTIES VC_MDD_ANDROID_USE_OF_STL "gnustl_shared")
	SET_TARGET_PROPERTIES(${MODULE_NAME} PROPERTIES VC_MDD_ANDROID_API_LEVEL  "android-19")
	
	SET_PROPERTY(TARGET ${MODULE_NAME} PROPERTY C_STANDARD 11)
	SET_PROPERTY(TARGET ${MODULE_NAME} PROPERTY CXX_STANDARD 14)
	SET_PROPERTY(TARGET ${MODULE_NAME} PROPERTY VC_MDD_ANDROID_EXCEPTION_HANDLING "Enabled")
	SET_PROPERTY(TARGET ${MODULE_NAME} PROPERTY VC_MDD_ANDROID_HAVE_RTTI "true")
ENDIF()

SET_TARGET_PROPERTIES(iconv PROPERTIES FOLDER "Engine")

MESSAGE(STATUS "iconv Configure success!")

