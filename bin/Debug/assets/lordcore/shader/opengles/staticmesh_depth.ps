#version 100

varying mediump vec4 vScreenPos;

void main(void)
{
    mediump float depth = vScreenPos.z / vScreenPos.w;

// 	depth = exp(depth*9.0);

	mediump vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * clamp(depth,0.0,0.999);
	enc = fract(enc);
	enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0);

	gl_FragColor = enc;
}