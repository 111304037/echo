#version 100

uniform sampler2D sceneColorSampler;
uniform sampler2D sceneBloomSampler;
uniform sampler2D sceneDepthSampler;
uniform mediump float dof_c;
uniform mediump float attenuation;
varying mediump vec2 texCoord;

void main(void)
{
	
	mediump vec4 sharp = texture2D( sceneColorSampler, texCoord );

	mediump vec4 blur = texture2D( sceneBloomSampler, texCoord );

	mediump vec4 depth = texture2D( sceneDepthSampler, texCoord);


	//gl_FragColor = mix(sharp,blur,step(0.9834,depth.r) * 0.8);

	gl_FragColor = mix(sharp, blur, clamp((depth.r - dof_c) * attenuation, 0.0, 1.0));
	
	//gl_FragColor = sharp * 0.5 + blur * 0.5;
}
