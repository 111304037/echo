#version 100
precision mediump float;
#include <fog_ps.inc>

uniform sampler2D texSampler;

varying mediump vec4 ofogColor;
varying mediump vec4 color;
varying mediump vec2 texCoord;

void main(void)
{
    mediump vec4 textureColor = texture2D(texSampler, texCoord);
	
    if(textureColor.w < 0.5 )
    {
        discard;
    }
  
   mediump vec4 finalColor = textureColor * color;
   gl_FragColor = vec4(mix(ofogColor.rgb, finalColor.rgb, ofogColor.a), finalColor.a);
   gl_FragColor.rgb = mix(gl_FragColor.rgb, varHeightFog.rgb, ComputeHeightFog(varHeightFog.a));
}